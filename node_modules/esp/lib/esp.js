// Generated by CoffeeScript 1.5.0
(function() {
  var esp, exports, persist, router, server, store, web;

  exports = module.exports = esp = {};

  web = require('./web');

  persist = require('./persist');

  store = persist.Store.instance();

  router = new web.Router;

  server = new web.Server(router);

  esp.Model = persist.Model;

  esp.run = function(port) {
    store.load(function() {
      return console.log("store loaded");
    });
    return server.run(port);
  };

  esp.route = function(callback) {
    if (callback != null) {
      return callback.apply(router);
    }
  };

  esp.auth = function(login, auth) {
    router.login = login;
    if (auth != null) {
      return router.auth = auth;
    }
  };

  esp.store = store;

  esp.router = router;

}).call(this);
